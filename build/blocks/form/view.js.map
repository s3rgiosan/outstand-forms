{"version":3,"file":"blocks/form/view.js","mappings":"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","sources":["webpack://outstand-forms/./src/validation-registry.js","webpack://outstand-forms/./src/validators/index.js","webpack://outstand-forms/./src/validators/maxLength.js","webpack://outstand-forms/./src/validators/minLength.js","webpack://outstand-forms/./src/validators/required.js","webpack://outstand-forms/external module \"@wordpress/interactivity\"","webpack://outstand-forms/webpack/bootstrap","webpack://outstand-forms/webpack/runtime/define property getters","webpack://outstand-forms/webpack/runtime/hasOwnProperty shorthand","webpack://outstand-forms/webpack/runtime/make namespace object","webpack://outstand-forms/./src/blocks/form/view.js"],"sourcesContent":["const validationRegistry = {\n\t/**\n\t * List of registered validators.\n\t *\n\t * @type {Object}\n\t */\n\tvalidators: {},\n\n\t/**\n\t * Register a new validator.\n\t *\n\t * @param {*} name     Validator name.\n\t * @param {*} callback Validator callback.\n\t */\n\tregister(name, callback) {\n\t\tthis.validators[name] = callback;\n\t},\n\n\t/**\n\t * Get a validator by name.\n\t *\n\t * @param {string} name Validator name.\n\t * @return {Function|null} Validator callback or null if not found.\n\t */\n\tget(name) {\n\t\treturn this.validators[name];\n\t},\n\n\t/**\n\t * Validate a value against a set of rules.\n\t *\n\t * @param {*}      value The value to validate.\n\t * @param {Object} rules The validation rules.\n\t * @return {Object} Validation result.\n\t */\n\tvalidate(value, rules = {}) {\n\t\tconst errors = [];\n\n\t\tfor (const [ruleName, ruleConfig] of Object.entries(rules)) {\n\t\t\t// Skip if rule is disabled.\n\t\t\tif (ruleConfig === false) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst validator = this.get(ruleName);\n\n\t\t\t// Skip if validator doesn't exist.\n\t\t\tif (!validator) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst params = ruleConfig === true ? {} : ruleConfig;\n\t\t\tconst isValid = validator(value, params);\n\n\t\t\tif (!isValid) {\n\t\t\t\terrors.push(ruleName);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tisValid: errors.length === 0,\n\t\t\terrors,\n\t\t};\n\t},\n};\n\nexport default validationRegistry;\n","import './required';\nimport './minLength';\nimport './maxLength';\n","/**\n * Internal dependencies\n */\nimport validationRegistry from '../validation-registry';\n\nfunction maxLength(value, length = 0) {\n\tif (!value || length === 0) {\n\t\treturn true;\n\t}\n\n\treturn value.length <= length;\n}\n\nvalidationRegistry.register('maxLength', maxLength);\n\nexport default maxLength;\n","/**\n * Internal dependencies\n */\nimport validationRegistry from '../validation-registry';\n\nfunction minLength(value, length = 0) {\n\tif (!value || length === 0) {\n\t\treturn true;\n\t}\n\n\treturn value.length >= length;\n}\n\nvalidationRegistry.register('minLength', minLength);\n\nexport default minLength;\n","/**\n * Internal dependencies\n */\nimport validationRegistry from '../validation-registry';\n\nfunction required(value) {\n\treturn value !== undefined && value !== null && value !== '';\n}\n\nvalidationRegistry.register('required', required);\n\nexport default required;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement, getConfig, withSyncEvent } from '@wordpress/interactivity';\n\n/**\n * Internal dependencies\n */\nimport validationRegistry from './../../validation-registry';\nimport './../../validators';\n\nconst { actions } = store('osf/form', {\n\tstate: {\n\t\t/**\n\t\t * Get the aria-describedby attribute for the field.\n\t\t *\n\t\t * @return {string|undefined} The aria-describedby attribute.\n\t\t */\n\t\tget fieldAriaDescribedByAttribute() {\n\t\t\tconst { isValid, helpTextFieldId, errorFieldId } = getContext();\n\n\t\t\tif (!helpTextFieldId && !errorFieldId) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (!errorFieldId) {\n\t\t\t\treturn helpTextFieldId;\n\t\t\t}\n\n\t\t\treturn isValid ? helpTextFieldId : `${errorFieldId} ${helpTextFieldId}`;\n\t\t},\n\t\t/**\n\t\t * Get the error message for the field.\n\t\t *\n\t\t * @return {string} The error message.\n\t\t */\n\t\tget fieldErrorMessage() {\n\t\t\tconst { isValid, validationErrors } = getContext();\n\n\t\t\t// Skip if there are no validation errors.\n\t\t\tif (isValid) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst { validationMessages = {} } = getConfig('osf/form');\n\n\t\t\t// Skip if there are no validation messages.\n\t\t\tif (!validationMessages) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst context = getContext();\n\t\t\tconst { validationRules } = context;\n\n\t\t\tconst error = validationErrors[0];\n\n\t\t\t// Skip if the error is not in the validation messages.\n\t\t\tif (validationMessages?.[error] === undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet message = validationMessages[error];\n\t\t\tswitch (error) {\n\t\t\t\tcase 'minLength':\n\t\t\t\t\tmessage = message.replace('{{min}}', validationRules.minLength);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'maxLength':\n\t\t\t\t\tmessage = message.replace('{{max}}', validationRules.maxLength);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn message;\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Handle the field focus event.\n\t\t */\n\t\thandleFieldFocus() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isFocused = true;\n\t\t},\n\t\t/**\n\t\t * Handle the field blur event.\n\t\t */\n\t\thandleFieldBlur() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.isFocused = false;\n\t\t},\n\t\thandleFieldChange() {\n\t\t\tconst context = getContext();\n\t\t\tconst { ref } = getElement();\n\n\t\t\tcontext.value = ref.value;\n\t\t\tactions.validateField();\n\t\t},\n\t\tvalidateField() {\n\t\t\tconsole.log('validateField', getElement().ref.getAttribute('name'), getContext());\n\t\t\tconst context = getContext();\n\t\t\tconst { value, validationRules } = context;\n\t\t\tconst { isValid, errors } = validationRegistry.validate(value, validationRules);\n\n\t\t\tcontext.isValid = isValid;\n\t\t\tcontext.validationErrors = errors;\n\t\t},\n\t\tonFormSubmit: withSyncEvent((ev) => {\n\t\t\tev.preventDefault();\n\n\t\t\tconst form = ev.currentTarget;\n\n\t\t\tconst formData = new FormData(form);\n\t\t\tconst entries = Object.fromEntries(formData.entries());\n\n\t\t\tconsole.log('onFormSubmit', entries);\n\t\t}),\n\t},\n});\n"],"names":["validationRegistry","validators","register","name","callback","get","validate","value","rules","errors","ruleName","ruleConfig","Object","entries","validator","params","isValid","push","length","maxLength","minLength","required","undefined","store","getContext","getElement","getConfig","withSyncEvent","actions","state","fieldAriaDescribedByAttribute","helpTextFieldId","errorFieldId","fieldErrorMessage","validationErrors","validationMessages","context","validationRules","error","message","replace","handleFieldFocus","isFocused","handleFieldBlur","handleFieldChange","ref","validateField","console","log","getAttribute","onFormSubmit","ev","preventDefault","form","currentTarget","formData","FormData","fromEntries"],"sourceRoot":""}